<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<style>
  fieldset, tr, td {
    border: 1px solid #bcbcbc;
    text-align: left;
  }
  fieldset {
    width: 500px;
    height: 600px;
  }

  .field-error{
    border-color: #dc3545;
    color: #dc3545;
  }
</style>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/main.css}"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script type="text/javascript" th:src="@{/script/main.js}"></script>
  <script type="text/javascript" th:src="@{/script/fileUpload.js}"></script>
</head>
<body>
  <form class="boardEdit" th:object="${boardUpdateVo}" th:action="@{/board/update}" method="post">
    <fieldset>
      <legend>수정하기</legend>
        <div>
          <tr>
            <td>
              <label>작성일:</label>
            </td>
            <td>
              <label th:text="${#temporals.format(boardUpdateVo.createTime, 'yyyy-MM-dd-HH:mm')}"></label>
            </td>
          </tr>
          <br/>
          <br/>
          <tr>
            <td>
              <label class="title" >제목</label>
              <input type="text" class="title" style="width: 300px;" th:field="*{title}">
            </td>
          </tr>
          <br/>
          <tr>
            <td>
              <label >내용</label>
              <input type="text" class="contents" style="width: 300px; height: 150px;" rows="3" th:field="*{contents}" >
            </td>
              <input type="hidden" th:field="*{id}">
          </tr>
          <br/>
          <bt/>
          <br/>
          <tr>
            <th>파일리스트: </th>
            <br/>
          </tr>

          <tr th:each="uploadFile : ${uploadFileList}">
            <div th:id="delete+${uploadFile.id}">
            <a class="file" style="width: 300px;" th:id="${uploadFile.id}" th:href="|/board/attach/${uploadFile.id}|" th:text="${uploadFile.originalFileName}"></a>
            <button type="button" onclick="deleteViewFile(this)">삭제</button>
            </div>
          </tr>
          <br/>
          <tr>
            <td>
              <div id="Files0">
                <input type='file' name='fileList0' />
                <button type="button" id="button-add-file" onclick="addFileForm()">파일추가</button>
                <button type="button" id="delete" onclick="deleteDefaultFile()">삭제</button>
              </div>
              <div id="file-list"></div>
            </td>
          </tr>
      </div>
    </fieldset>
      <button type="submit" id="updateButton" th:onclick="updateFn()" >저장</button>
    <button type="button"  th:onclick="|location.href='@{/board/view//{id}(id = ${id})}'|">취소</button>
      <button type="button" th:onclick="|location.href='@{/board/list}'|">목록</button>
  </form>
<script>
  function deleteViewFile(obj){
    $(obj).parent().remove()

  }


</script>
</body>
</html>